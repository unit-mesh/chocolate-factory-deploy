(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{30539:function(e,s,t){Promise.resolve().then(t.bind(t,99893))},99893:function(e,s,t){"use strict";t.r(s),t.d(s,{Chat:function(){return X}});var n,r,a=t(44462),l=t(93345),o=t(57632),i=t(39546),c=t(25882),d=t(88936);let u=(0,d.j)("inline-flex items-center justify-center rounded-md text-sm font-medium shadow ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-md hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"shadow-none hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 shadow-none hover:underline"},size:{default:"h-8 px-4 py-2",sm:"h-8 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-8 w-8 p-0"}},defaultVariants:{variant:"default",size:"default"}}),m=i.forwardRef((e,s)=>{let{className:t,variant:n,size:r,asChild:l=!1,...i}=e,d=l?c.g7:"button";return(0,a.jsx)(d,{className:(0,o.cn)(u({variant:n,size:r,className:t})),ref:s,...i})});m.displayName="Button";var h=t(37101),p=t(82982),x=t(14717),f=t(53055);function g(e){let{onSubmit:s,input:t,setInput:n,isLoading:r}=e,{formRef:l,onKeyDown:c}=function(){let e=(0,i.useRef)(null);return{formRef:e,onKeyDown:s=>{if("Enter"===s.key&&!s.shiftKey&&!s.nativeEvent.isComposing){var t;null===(t=e.current)||void 0===t||t.requestSubmit(),s.preventDefault()}}}}(),d=i.useRef(null),g=(0,f.useRouter)();return i.useEffect(()=>{d.current&&d.current.focus()},[]),(0,a.jsx)("form",{onSubmit:async e=>{e.preventDefault(),(null==t?void 0:t.trim())&&(n(""),await s(t))},ref:l,children:(0,a.jsxs)("div",{className:"relative flex max-h-60 w-full grow flex-col overflow-hidden bg-background px-8 sm:rounded-md sm:border sm:px-12",children:[(0,a.jsxs)(x.u,{children:[(0,a.jsx)(x.aJ,{asChild:!0,children:(0,a.jsxs)("button",{onClick:e=>{e.preventDefault(),g.refresh(),g.push("/")},className:(0,o.cn)(u({size:"sm",variant:"outline"}),"absolute left-0 top-4 h-8 w-8 rounded-full bg-background p-0 sm:left-4"),children:[(0,a.jsx)(p.IconPlus,{}),(0,a.jsx)("span",{className:"sr-only",children:"New Chat"})]})}),(0,a.jsx)(x._v,{children:"New Chat"})]}),(0,a.jsx)(h.Z,{ref:d,tabIndex:0,onKeyDown:c,rows:1,value:t,onChange:e=>n(e.target.value),placeholder:"Send a message.",spellCheck:!1,className:"min-h-[60px] w-full resize-none bg-transparent px-4 py-[1.3rem] focus-within:outline-none sm:text-sm"}),(0,a.jsx)("div",{className:"absolute right-0 top-4 sm:right-4",children:(0,a.jsxs)(x.u,{children:[(0,a.jsx)(x.aJ,{asChild:!0,children:(0,a.jsxs)(m,{type:"submit",size:"icon",disabled:r||""===t,children:[(0,a.jsx)(p.IconArrowElbow,{}),(0,a.jsx)("span",{className:"sr-only",children:"Send message"})]})}),(0,a.jsx)(x._v,{children:"Send message"})]})})]})})}function v(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,[s,t]=i.useState(!1);return i.useEffect(()=>{let s=()=>{t(window.innerHeight+window.scrollY>=document.body.offsetHeight-e)};return window.addEventListener("scroll",s,{passive:!0}),s(),()=>{window.removeEventListener("scroll",s)}},[e]),s}function b(e){let{className:s,...t}=e,n=v();return(0,a.jsxs)(m,{variant:"outline",size:"icon",className:(0,o.cn)("absolute right-4 top-1 z-10 bg-background transition-opacity duration-300 sm:right-8 md:top-2",n?"opacity-0":"opacity-100",s),onClick:()=>window.scrollTo({top:document.body.offsetHeight,behavior:"smooth"}),...t,children:[(0,a.jsx)(p.IconArrowDown,{}),(0,a.jsx)("span",{className:"sr-only",children:"Scroll to bottom"})]})}function j(e){let{href:s,children:t}=e;return(0,a.jsxs)("a",{href:s,target:"_blank",className:"inline-flex flex-1 justify-center gap-1 leading-4 hover:underline",children:[(0,a.jsx)("span",{children:t}),(0,a.jsx)("svg",{"aria-hidden":"true",height:"7",viewBox:"0 0 6 6",width:"7",className:"opacity-70",children:(0,a.jsx)("path",{d:"M1.25215 5.54731L0.622742 4.9179L3.78169 1.75597H1.3834L1.38936 0.890915H5.27615V4.78069H4.40513L4.41109 2.38538L1.25215 5.54731Z",fill:"currentColor"})})]})}function y(e){let{className:s,...t}=e;return(0,a.jsxs)("p",{className:(0,o.cn)("px-2 text-center text-xs leading-normal text-muted-foreground",s),...t,children:["Open source LLM helper factor built with"," ",(0,a.jsx)(j,{href:"https://github.com/unit-mesh/chocolate-factory",children:"Chocolate Factory"}),"."]})}function w(e){let{id:s,isLoading:t,stop:n,append:r,reload:l,input:o,setInput:i,messages:c}=e;return(0,a.jsxs)("div",{className:"fixed inset-x-0 bottom-0 bg-gradient-to-b from-muted/10 from-10% to-muted/30 to-50%",children:[(0,a.jsx)(b,{}),(0,a.jsxs)("div",{className:"mx-auto sm:max-w-3xl sm:px-4",children:[(0,a.jsx)("div",{className:"flex h-10 items-center justify-center",children:t?(0,a.jsxs)(m,{variant:"outline",onClick:()=>n(),className:"bg-background",children:[(0,a.jsx)(p.IconStop,{className:"mr-2"}),"Stop generating"]}):(null==c?void 0:c.length)>0&&(0,a.jsxs)(m,{variant:"outline",onClick:()=>l(),className:"bg-background",children:[(0,a.jsx)(p.IconRefresh,{className:"mr-2"}),"Regenerate response"]})}),(0,a.jsxs)("div",{className:"space-y-4 border-t bg-background px-4 py-2 shadow-lg sm:rounded-t-xl sm:border md:py-4",children:[(0,a.jsx)(g,{onSubmit:async e=>{await r({id:s,content:e,role:"user"})},input:o,setInput:i,isLoading:t}),(0,a.jsx)(y,{className:"hidden sm:block"})]})]})]})}var N=t(42862);let C=N.fC,k=N.ZA,L=N.B4,S=i.forwardRef((e,s)=>{let{className:t,children:n,...r}=e;return(0,a.jsxs)(N.xz,{ref:s,className:(0,o.cn)("flex h-9 w-full items-center justify-between rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...r,children:[n,(0,a.jsx)(N.JO,{asChild:!0,children:(0,a.jsx)(p.IconChevronUpDown,{className:"opacity-50"})})]})});S.displayName=N.xz.displayName;let z=i.forwardRef((e,s)=>{let{className:t,children:n,position:r="popper",...l}=e;return(0,a.jsx)(N.h_,{children:(0,a.jsx)(N.VY,{ref:s,className:(0,o.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md animate-in fade-in-80","popper"===r&&"translate-y-1",t),position:r,...l,children:(0,a.jsx)(N.l_,{className:(0,o.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n})})})});z.displayName=N.VY.displayName;let I=i.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(N.__,{ref:s,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...n})});I.displayName=N.__.displayName;let R=i.forwardRef((e,s)=>{let{className:t,children:n,...r}=e;return(0,a.jsxs)(N.ck,{ref:s,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(N.wU,{children:(0,a.jsx)(p.IconCheck,{className:"h-4 w-4"})})}),(0,a.jsx)(N.eT,{children:n})]})});R.displayName=N.ck.displayName;let E=i.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(N.Z0,{ref:s,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",t),...n})});E.displayName=N.Z0.displayName;let D=[{label:"Frontend",value:"Frontend"},{label:"Ktor",value:"Ktor"},{label:"SQL",value:"SQL"},{label:"Custom",value:"Custom"}];function _(e){var s;let{setDomain:t}=e,[n,r]=(0,i.useState)(D[0].value);return(0,a.jsx)("div",{className:"mx-auto max-w-2xl px-4",children:(0,a.jsxs)("div",{className:"rounded-lg border bg-background p-8",children:[(0,a.jsx)("h1",{className:"mb-2 text-lg font-semibold",children:"Welcome to use Chocolate Factory!"}),(0,a.jsxs)("p",{className:"mb-2 leading-normal text-muted-foreground",children:["This is an open source LLM application engine designed to empower you in creating your very own AI assistant. Built with"," ",(0,a.jsx)(j,{href:"https://unitmesh.cc",children:"Unit Mesh Team"}),"."]}),(0,a.jsx)("p",{className:"leading-normal text-muted-foreground",children:"You can start with select a LLM helper here:"}),(0,a.jsx)("div",{className:"mt-4 flex flex-col items-start space-y-2",children:(0,a.jsxs)(C,{value:n,onValueChange:e=>{console.log(e),r(e),t(e)},children:[(0,a.jsx)(S,{children:(0,a.jsx)(L,{placeholder:"Select a domain…","aria-label":n,children:null===(s=D.find(e=>e.value===n))||void 0===s?void 0:s.label})}),(0,a.jsx)(z,{children:(0,a.jsx)(k,{children:D.map(e=>(0,a.jsx)(R,{value:e.value,disabled:e.value===n,children:e.label},e.value))})})]})})]})})}var T=t(98184);function M(e){let{trackVisibility:s}=e,t=v(),{ref:n,entry:r,inView:l}=(0,T.YD)({trackVisibility:s,delay:100,rootMargin:"0px 0px -150px 0px"});return i.useEffect(()=>{t&&s&&!l&&(null==r||r.target.scrollIntoView({block:"start"}))},[l,r,t,s]),(0,a.jsx)("div",{ref:n,className:"h-px w-full"})}let A=(e,s)=>{let[t,n]=(0,i.useState)(s);return(0,i.useEffect)(()=>{let s=window.localStorage.getItem(e);s&&n(JSON.parse(s))},[e]),[t,s=>{n(s),window.localStorage.setItem(e,JSON.stringify(s))}]};var F=t(44032);let O=i.forwardRef((e,s)=>{let{className:t,orientation:n="horizontal",decorative:r=!0,...l}=e;return(0,a.jsx)(F.f,{ref:s,decorative:r,orientation:n,className:(0,o.cn)("shrink-0 bg-border","horizontal"===n?"h-[1px] w-full":"h-full w-[1px]",t),...l})});O.displayName=F.f.displayName;var U=t(4627),V=t(73249),Z=t(6479),B=t(67629);function H(e){let{timeout:s=2e3}=e,[t,n]=i.useState(!1);return{isCopied:t,copyToClipboard:e=>{var t;(null===(t=navigator.clipboard)||void 0===t?void 0:t.writeText)&&e&&navigator.clipboard.writeText(e).then(()=>{n(!0),setTimeout(()=>{n(!1)},s)})}}}let Y={javascript:".js",python:".py",java:".java",c:".c",cpp:".cpp","c++":".cpp","c#":".cs",ruby:".rb",php:".php",swift:".swift","objective-c":".m",kotlin:".kt",typescript:".ts",go:".go",perl:".pl",rust:".rs",scala:".scala",haskell:".hs",lua:".lua",shell:".sh",sql:".sql",html:".html",css:".css"},J=function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t="ABCDEFGHJKLMNPQRSTUVWXY3456789",n="";for(let s=0;s<e;s++)n+=t.charAt(Math.floor(Math.random()*t.length));return s?n.toLowerCase():n},K=(0,i.memo)(e=>{let{language:s,value:t}=e,{isCopied:n,copyToClipboard:r}=H({timeout:2e3});return(0,a.jsxs)("div",{className:"relative w-full font-sans codeblock bg-zinc-950",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between w-full px-6 py-2 pr-4 bg-zinc-800 text-zinc-100",children:[(0,a.jsx)("span",{className:"text-xs lowercase",children:s}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsxs)(m,{variant:"ghost",className:"hover:bg-zinc-800 focus-visible:ring-1 focus-visible:ring-slate-700 focus-visible:ring-offset-0",onClick:()=>{let e=Y[s]||".file",n="file-".concat(J(3,!0)).concat(e),r=window.prompt("Enter file name",n);if(!r)return;let a=new Blob([t],{type:"text/plain"}),l=URL.createObjectURL(a),o=document.createElement("a");o.download=r,o.href=l,o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(l)},size:"icon",children:[(0,a.jsx)(p.IconDownload,{}),(0,a.jsx)("span",{className:"sr-only",children:"Download"})]}),(0,a.jsxs)(m,{variant:"ghost",size:"icon",className:"text-xs hover:bg-zinc-800 focus-visible:ring-1 focus-visible:ring-slate-700 focus-visible:ring-offset-0",onClick:()=>{n||r(t)},children:[n?(0,a.jsx)(p.IconCheck,{}):(0,a.jsx)(p.IconCopy,{}),(0,a.jsx)("span",{className:"sr-only",children:"Copy code"})]})]})]}),(0,a.jsx)(Z.Z,{language:s,style:B.RY,PreTag:"div",showLineNumbers:!0,customStyle:{margin:0,width:"100%",background:"transparent",padding:"1.5rem 1rem"},codeTagProps:{style:{fontSize:"0.9rem",fontFamily:"var(--font-mono)"}},children:t})]})});K.displayName="CodeBlock";var P=t(1373);let q=(0,i.memo)(P.D,(e,s)=>e.children===s.children&&e.className===s.className);function Q(e){let{message:s,className:t,...n}=e,{isCopied:r,copyToClipboard:l}=H({timeout:2e3});return(0,a.jsx)("div",{className:(0,o.cn)("flex items-center justify-end transition-opacity group-hover:opacity-100 md:absolute md:-right-10 md:-top-2 md:opacity-0",t),...n,children:(0,a.jsxs)(m,{variant:"ghost",size:"icon",onClick:()=>{r||l(s.content)},children:[r?(0,a.jsx)(p.IconCheck,{}):(0,a.jsx)(p.IconCopy,{}),(0,a.jsx)("span",{className:"sr-only",children:"Copy message"})]})})}function W(e){let{message:s,...t}=e;return(0,a.jsxs)("div",{className:(0,o.cn)("group relative mb-4 flex items-start md:-ml-12"),...t,children:[(0,a.jsx)("div",{className:(0,o.cn)("flex h-8 w-8 shrink-0 select-none items-center justify-center rounded-md border shadow","user"===s.role?"bg-background":"bg-primary text-primary-foreground"),children:"user"===s.role?(0,a.jsx)(p.IconUser,{}):(0,a.jsx)(p.IconOpenAI,{})}),(0,a.jsxs)("div",{className:"flex-1 px-1 ml-4 space-y-2 overflow-hidden",children:[(0,a.jsx)(q,{className:"prose break-words dark:prose-invert prose-p:leading-relaxed prose-pre:p-0",remarkPlugins:[U.Z,V.Z],components:{p(e){let{children:s}=e;return(0,a.jsx)("p",{className:"mb-2 last:mb-0",children:s})},code(e){let{node:s,inline:t,className:n,children:r,...l}=e;if(r.length){if("▍"==r[0])return(0,a.jsx)("span",{className:"mt-1 cursor-default animate-pulse",children:"▍"});r[0]=r[0].replace("`▍`","▍")}let o=/language-(\w+)/.exec(n||"");return t?(0,a.jsx)("code",{className:n,...l,children:r}):(0,a.jsx)(K,{language:o&&o[1]||"",value:String(r).replace(/\n$/,""),...l},Math.random())}},children:s.content}),(0,a.jsx)(Q,{message:s})]})]})}function G(e){let{messages:s}=e;return s.length?(0,a.jsx)("div",{className:"relative mx-auto max-w-3xl px-4",children:s.map((e,t)=>(0,a.jsxs)("div",{children:[(0,a.jsx)(W,{message:e}),t<s.length-1&&(0,a.jsx)(O,{className:"my-4 md:my-8"})]},t))}):null}function X(e){let{id:s,initialMessages:t,className:n}=e,[i,c]=A("ai-domain","Frontend"),{messages:d,append:u,reload:m,stop:h,isLoading:p,input:x,setInput:f}=(0,l.R)({api:"http://localhost:18080/api/chat",initialMessages:t,id:s,headers:{"Content-Type":"application/json"},body:{stage:r.Clarify,id:s,domain:i}});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:(0,o.cn)("pb-[200px] pt-4 md:pt-10",n),children:d.length?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(G,{messages:d}),(0,a.jsx)(M,{trackVisibility:p})]}):(0,a.jsx)(_,{setDomain:c})}),(0,a.jsx)(w,{id:s,isLoading:p,stop:h,append:u,reload:m,messages:d,input:x,setInput:f})]})}(n=r||(r={})).Classify="Classify",n.Clarify="Clarify",n.Analyze="Analyze",n.Design="Design",n.Execute="Execute",n.Custom="Custom"}},function(e){e.O(0,[143,491,811,33,191,744],function(){return e(e.s=30539)}),_N_E=e.O()}]);