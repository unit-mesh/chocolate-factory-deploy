(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{30539:function(e,s,n){Promise.resolve().then(n.bind(n,99893))},99893:function(e,s,n){"use strict";n.r(s),n.d(s,{Chat:function(){return X}});var t,r,a=n(44462),l=n(93345),o=n(57632),i=n(39546),c=n(25882),d=n(88936);let u=(0,d.j)("inline-flex items-center justify-center rounded-md text-sm font-medium shadow ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-md hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"shadow-none hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 shadow-none hover:underline"},size:{default:"h-8 px-4 py-2",sm:"h-8 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-8 w-8 p-0"}},defaultVariants:{variant:"default",size:"default"}}),m=i.forwardRef((e,s)=>{let{className:n,variant:t,size:r,asChild:l=!1,...i}=e,d=l?c.g7:"button";return(0,a.jsx)(d,{className:(0,o.cn)(u({variant:t,size:r,className:n})),ref:s,...i})});m.displayName="Button";var h=n(37101),p=n(82982),f=n(14717),x=n(53055);function g(e){let{onSubmit:s,input:n,setInput:t,isLoading:r}=e,{formRef:l,onKeyDown:c}=function(){let e=(0,i.useRef)(null);return{formRef:e,onKeyDown:s=>{if("Enter"===s.key&&!s.shiftKey&&!s.nativeEvent.isComposing){var n;null===(n=e.current)||void 0===n||n.requestSubmit(),s.preventDefault()}}}}(),d=i.useRef(null),g=(0,x.useRouter)();return i.useEffect(()=>{d.current&&d.current.focus()},[]),(0,a.jsx)("form",{onSubmit:async e=>{e.preventDefault(),(null==n?void 0:n.trim())&&(t(""),await s(n))},ref:l,children:(0,a.jsxs)("div",{className:"relative flex max-h-60 w-full grow flex-col overflow-hidden bg-background px-8 sm:rounded-md sm:border sm:px-12",children:[(0,a.jsxs)(f.u,{children:[(0,a.jsx)(f.aJ,{asChild:!0,children:(0,a.jsxs)("button",{onClick:e=>{e.preventDefault(),g.refresh(),g.push("/")},className:(0,o.cn)(u({size:"sm",variant:"outline"}),"absolute left-0 top-4 h-8 w-8 rounded-full bg-background p-0 sm:left-4"),children:[(0,a.jsx)(p.IconPlus,{}),(0,a.jsx)("span",{className:"sr-only",children:"New Chat"})]})}),(0,a.jsx)(f._v,{children:"New Chat"})]}),(0,a.jsx)(h.Z,{ref:d,tabIndex:0,onKeyDown:c,rows:1,value:n,onChange:e=>t(e.target.value),placeholder:"Send a message.",spellCheck:!1,className:"min-h-[60px] w-full resize-none bg-transparent px-4 py-[1.3rem] focus-within:outline-none sm:text-sm"}),(0,a.jsx)("div",{className:"absolute right-0 top-4 sm:right-4",children:(0,a.jsxs)(f.u,{children:[(0,a.jsx)(f.aJ,{asChild:!0,children:(0,a.jsxs)(m,{type:"submit",size:"icon",disabled:r||""===n,children:[(0,a.jsx)(p.IconArrowElbow,{}),(0,a.jsx)("span",{className:"sr-only",children:"Send message"})]})}),(0,a.jsx)(f._v,{children:"Send message"})]})})]})})}function v(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,[s,n]=i.useState(!1);return i.useEffect(()=>{let s=()=>{n(window.innerHeight+window.scrollY>=document.body.offsetHeight-e)};return window.addEventListener("scroll",s,{passive:!0}),s(),()=>{window.removeEventListener("scroll",s)}},[e]),s}function b(e){let{className:s,...n}=e,t=v();return(0,a.jsxs)(m,{variant:"outline",size:"icon",className:(0,o.cn)("absolute right-4 top-1 z-10 bg-background transition-opacity duration-300 sm:right-8 md:top-2",t?"opacity-0":"opacity-100",s),onClick:()=>window.scrollTo({top:document.body.offsetHeight,behavior:"smooth"}),...n,children:[(0,a.jsx)(p.IconArrowDown,{}),(0,a.jsx)("span",{className:"sr-only",children:"Scroll to bottom"})]})}function j(e){let{href:s,children:n}=e;return(0,a.jsxs)("a",{href:s,target:"_blank",className:"inline-flex flex-1 justify-center gap-1 leading-4 hover:underline",children:[(0,a.jsx)("span",{children:n}),(0,a.jsx)("svg",{"aria-hidden":"true",height:"7",viewBox:"0 0 6 6",width:"7",className:"opacity-70",children:(0,a.jsx)("path",{d:"M1.25215 5.54731L0.622742 4.9179L3.78169 1.75597H1.3834L1.38936 0.890915H5.27615V4.78069H4.40513L4.41109 2.38538L1.25215 5.54731Z",fill:"currentColor"})})]})}function y(e){let{className:s,...n}=e;return(0,a.jsxs)("p",{className:(0,o.cn)("px-2 text-center text-xs leading-normal text-muted-foreground",s),...n,children:["Open source LLM helper factor built with"," ",(0,a.jsx)(j,{href:"https://github.com/unit-mesh/chocolate-factory",children:"Chocolate Factory"}),"."]})}function w(e){let{id:s,isLoading:n,stop:t,append:r,reload:l,input:o,setInput:i,messages:c}=e;return(0,a.jsxs)("div",{className:"fixed inset-x-0 bottom-0 bg-gradient-to-b from-muted/10 from-10% to-muted/30 to-50%",children:[(0,a.jsx)(b,{}),(0,a.jsxs)("div",{className:"mx-auto sm:max-w-3xl sm:px-4",children:[(0,a.jsx)("div",{className:"flex h-10 items-center justify-center",children:n?(0,a.jsxs)(m,{variant:"outline",onClick:()=>t(),className:"bg-background",children:[(0,a.jsx)(p.IconStop,{className:"mr-2"}),"Stop generating"]}):(null==c?void 0:c.length)>0&&(0,a.jsxs)(m,{variant:"outline",onClick:()=>l(),className:"bg-background",children:[(0,a.jsx)(p.IconRefresh,{className:"mr-2"}),"Regenerate response"]})}),(0,a.jsxs)("div",{className:"space-y-4 border-t bg-background px-4 py-2 shadow-lg sm:rounded-t-xl sm:border md:py-4",children:[(0,a.jsx)(g,{onSubmit:async e=>{await r({id:s,content:e,role:"user"})},input:o,setInput:i,isLoading:n}),(0,a.jsx)(y,{className:"hidden sm:block"})]})]})]})}var N=n(42862);let k=N.fC,C=N.ZA,z=N.B4,I=i.forwardRef((e,s)=>{let{className:n,children:t,...r}=e;return(0,a.jsxs)(N.xz,{ref:s,className:(0,o.cn)("flex h-9 w-full items-center justify-between rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),...r,children:[t,(0,a.jsx)(N.JO,{asChild:!0,children:(0,a.jsx)(p.IconChevronUpDown,{className:"opacity-50"})})]})});I.displayName=N.xz.displayName;let L=i.forwardRef((e,s)=>{let{className:n,children:t,position:r="popper",...l}=e;return(0,a.jsx)(N.h_,{children:(0,a.jsx)(N.VY,{ref:s,className:(0,o.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md animate-in fade-in-80","popper"===r&&"translate-y-1",n),position:r,...l,children:(0,a.jsx)(N.l_,{className:(0,o.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t})})})});L.displayName=N.VY.displayName;let S=i.forwardRef((e,s)=>{let{className:n,...t}=e;return(0,a.jsx)(N.__,{ref:s,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...t})});S.displayName=N.__.displayName;let R=i.forwardRef((e,s)=>{let{className:n,children:t,...r}=e;return(0,a.jsxs)(N.ck,{ref:s,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...r,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(N.wU,{children:(0,a.jsx)(p.IconCheck,{className:"h-4 w-4"})})}),(0,a.jsx)(N.eT,{children:t})]})});R.displayName=N.ck.displayName;let E=i.forwardRef((e,s)=>{let{className:n,...t}=e;return(0,a.jsx)(N.Z0,{ref:s,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",n),...t})});E.displayName=N.Z0.displayName;let D=[{label:"Frontend",value:"frontend"}];function _(e){var s;let{setDomain:n}=e,[t,r]=(0,i.useState)("frontend");return(0,a.jsx)("div",{className:"mx-auto max-w-2xl px-4",children:(0,a.jsxs)("div",{className:"rounded-lg border bg-background p-8",children:[(0,a.jsx)("h1",{className:"mb-2 text-lg font-semibold",children:"Welcome to use Chocolate Factory!"}),(0,a.jsxs)("p",{className:"mb-2 leading-normal text-muted-foreground",children:["This is an open source LLM application engine designed to empower you in creating your very own AI assistant. Built with"," ",(0,a.jsx)(j,{href:"https://unitmesh.cc",children:"Unit Mesh Team"}),"."]}),(0,a.jsx)("p",{className:"leading-normal text-muted-foreground",children:"You can start with select a LLM helper here:"}),(0,a.jsx)("div",{className:"mt-4 flex flex-col items-start space-y-2",children:(0,a.jsxs)(k,{value:t,onValueChange:e=>{console.log(e),r(e),n(e)},children:[(0,a.jsx)(I,{children:(0,a.jsx)(z,{placeholder:"Select a fruit…","aria-label":t,children:null===(s=D.find(e=>e.value===t))||void 0===s?void 0:s.label})}),(0,a.jsx)(L,{children:(0,a.jsx)(C,{children:D.map(e=>(0,a.jsx)(R,{value:e.value,disabled:e.value===t,children:e.label},e.value))})})]})})]})})}var T=n(98184);function M(e){let{trackVisibility:s}=e,n=v(),{ref:t,entry:r,inView:l}=(0,T.YD)({trackVisibility:s,delay:100,rootMargin:"0px 0px -150px 0px"});return i.useEffect(()=>{n&&s&&!l&&(null==r||r.target.scrollIntoView({block:"start"}))},[l,r,n,s]),(0,a.jsx)("div",{ref:t,className:"h-px w-full"})}let A=(e,s)=>{let[n,t]=(0,i.useState)(s);return(0,i.useEffect)(()=>{let s=window.localStorage.getItem(e);s&&t(JSON.parse(s))},[e]),[n,s=>{t(s),window.localStorage.setItem(e,JSON.stringify(s))}]};var O=n(44032);let U=i.forwardRef((e,s)=>{let{className:n,orientation:t="horizontal",decorative:r=!0,...l}=e;return(0,a.jsx)(O.f,{ref:s,decorative:r,orientation:t,className:(0,o.cn)("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",n),...l})});U.displayName=O.f.displayName;var F=n(4627),V=n(73249),Z=n(6479),B=n(67629);function H(e){let{timeout:s=2e3}=e,[n,t]=i.useState(!1);return{isCopied:n,copyToClipboard:e=>{var n;(null===(n=navigator.clipboard)||void 0===n?void 0:n.writeText)&&e&&navigator.clipboard.writeText(e).then(()=>{t(!0),setTimeout(()=>{t(!1)},s)})}}}let Y={javascript:".js",python:".py",java:".java",c:".c",cpp:".cpp","c++":".cpp","c#":".cs",ruby:".rb",php:".php",swift:".swift","objective-c":".m",kotlin:".kt",typescript:".ts",go:".go",perl:".pl",rust:".rs",scala:".scala",haskell:".hs",lua:".lua",shell:".sh",sql:".sql",html:".html",css:".css"},J=function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="ABCDEFGHJKLMNPQRSTUVWXY3456789",t="";for(let s=0;s<e;s++)t+=n.charAt(Math.floor(Math.random()*n.length));return s?t.toLowerCase():t},P=(0,i.memo)(e=>{let{language:s,value:n}=e,{isCopied:t,copyToClipboard:r}=H({timeout:2e3});return(0,a.jsxs)("div",{className:"relative w-full font-sans codeblock bg-zinc-950",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between w-full px-6 py-2 pr-4 bg-zinc-800 text-zinc-100",children:[(0,a.jsx)("span",{className:"text-xs lowercase",children:s}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsxs)(m,{variant:"ghost",className:"hover:bg-zinc-800 focus-visible:ring-1 focus-visible:ring-slate-700 focus-visible:ring-offset-0",onClick:()=>{let e=Y[s]||".file",t="file-".concat(J(3,!0)).concat(e),r=window.prompt("Enter file name",t);if(!r)return;let a=new Blob([n],{type:"text/plain"}),l=URL.createObjectURL(a),o=document.createElement("a");o.download=r,o.href=l,o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(l)},size:"icon",children:[(0,a.jsx)(p.IconDownload,{}),(0,a.jsx)("span",{className:"sr-only",children:"Download"})]}),(0,a.jsxs)(m,{variant:"ghost",size:"icon",className:"text-xs hover:bg-zinc-800 focus-visible:ring-1 focus-visible:ring-slate-700 focus-visible:ring-offset-0",onClick:()=>{t||r(n)},children:[t?(0,a.jsx)(p.IconCheck,{}):(0,a.jsx)(p.IconCopy,{}),(0,a.jsx)("span",{className:"sr-only",children:"Copy code"})]})]})]}),(0,a.jsx)(Z.Z,{language:s,style:B.RY,PreTag:"div",showLineNumbers:!0,customStyle:{margin:0,width:"100%",background:"transparent",padding:"1.5rem 1rem"},codeTagProps:{style:{fontSize:"0.9rem",fontFamily:"var(--font-mono)"}},children:n})]})});P.displayName="CodeBlock";var K=n(1373);let q=(0,i.memo)(K.D,(e,s)=>e.children===s.children&&e.className===s.className);function W(e){let{message:s,className:n,...t}=e,{isCopied:r,copyToClipboard:l}=H({timeout:2e3});return(0,a.jsx)("div",{className:(0,o.cn)("flex items-center justify-end transition-opacity group-hover:opacity-100 md:absolute md:-right-10 md:-top-2 md:opacity-0",n),...t,children:(0,a.jsxs)(m,{variant:"ghost",size:"icon",onClick:()=>{r||l(s.content)},children:[r?(0,a.jsx)(p.IconCheck,{}):(0,a.jsx)(p.IconCopy,{}),(0,a.jsx)("span",{className:"sr-only",children:"Copy message"})]})})}function G(e){let{message:s,...n}=e;return(0,a.jsxs)("div",{className:(0,o.cn)("group relative mb-4 flex items-start md:-ml-12"),...n,children:[(0,a.jsx)("div",{className:(0,o.cn)("flex h-8 w-8 shrink-0 select-none items-center justify-center rounded-md border shadow","user"===s.role?"bg-background":"bg-primary text-primary-foreground"),children:"user"===s.role?(0,a.jsx)(p.IconUser,{}):(0,a.jsx)(p.IconOpenAI,{})}),(0,a.jsxs)("div",{className:"flex-1 px-1 ml-4 space-y-2 overflow-hidden",children:[(0,a.jsx)(q,{className:"prose break-words dark:prose-invert prose-p:leading-relaxed prose-pre:p-0",remarkPlugins:[F.Z,V.Z],components:{p(e){let{children:s}=e;return(0,a.jsx)("p",{className:"mb-2 last:mb-0",children:s})},code(e){let{node:s,inline:n,className:t,children:r,...l}=e;if(r.length){if("▍"==r[0])return(0,a.jsx)("span",{className:"mt-1 cursor-default animate-pulse",children:"▍"});r[0]=r[0].replace("`▍`","▍")}let o=/language-(\w+)/.exec(t||"");return n?(0,a.jsx)("code",{className:t,...l,children:r}):(0,a.jsx)(P,{language:o&&o[1]||"",value:String(r).replace(/\n$/,""),...l},Math.random())}},children:s.content}),(0,a.jsx)(W,{message:s})]})]})}function Q(e){let{messages:s}=e;return s.length?(0,a.jsx)("div",{className:"relative mx-auto max-w-3xl px-4",children:s.map((e,n)=>(0,a.jsxs)("div",{children:[(0,a.jsx)(G,{message:e}),n<s.length-1&&(0,a.jsx)(U,{className:"my-4 md:my-8"})]},n))}):null}function X(e){let{id:s,initialMessages:n,className:t}=e,[i,c]=A("ai-domain","Frontend"),{messages:d,append:u,reload:m,stop:h,isLoading:p,input:f,setInput:x}=(0,l.R)({api:"http://localhost:18080/api/chat",initialMessages:n,id:s,headers:{"Content-Type":"application/json"},body:{stage:r.Clarify,id:s,domain:i}});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:(0,o.cn)("pb-[200px] pt-4 md:pt-10",t),children:d.length?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Q,{messages:d}),(0,a.jsx)(M,{trackVisibility:p})]}):(0,a.jsx)(_,{setDomain:c})}),(0,a.jsx)(w,{id:s,isLoading:p,stop:h,append:u,reload:m,messages:d,input:f,setInput:x})]})}(t=r||(r={})).Classify="Classify",t.Clarify="Clarify",t.Analyze="Analyze",t.Design="Design",t.Execute="Execute",t.Custom="Custom"}},function(e){e.O(0,[143,491,811,33,191,744],function(){return e(e.s=30539)}),_N_E=e.O()}]);